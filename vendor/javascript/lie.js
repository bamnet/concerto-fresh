// lie@3.3.0 downloaded from https://ga.jspm.io/npm:lie@3.3.0/lib/browser.js

import e from"immediate";var t={};var r=e;function INTERNAL(){}var o={};var n=["REJECTED"];var i=["FULFILLED"];var u=["PENDING"];t=Promise;function Promise(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=u;this.queue=[];this.outcome=void 0;e!==INTERNAL&&safelyResolveThenable(this,e)}Promise.prototype["finally"]=function(e){if("function"!==typeof e)return this;var t=this.constructor;return this.then(resolve,reject);function resolve(r){function yes(){return r}return t.resolve(e()).then(yes)}function reject(r){function no(){throw r}return t.resolve(e()).then(no)}};Promise.prototype["catch"]=function(e){return this.then(null,e)};Promise.prototype.then=function(e,t){if("function"!==typeof e&&this.state===i||"function"!==typeof t&&this.state===n)return this;var r=new this.constructor(INTERNAL);if(this.state!==u){var o=this.state===i?e:t;unwrap(r,o,this.outcome)}else this.queue.push(new QueueItem(r,e,t));return r};function QueueItem(e,t,r){this.promise=e;if("function"===typeof t){this.onFulfilled=t;this.callFulfilled=this.otherCallFulfilled}if("function"===typeof r){this.onRejected=r;this.callRejected=this.otherCallRejected}}QueueItem.prototype.callFulfilled=function(e){o.resolve(this.promise,e)};QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)};QueueItem.prototype.callRejected=function(e){o.reject(this.promise,e)};QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)};function unwrap(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}o.resolve=function(e,t){var r=tryCatch(getThen,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)safelyResolveThenable(e,n);else{e.state=i;e.outcome=t;var u=-1;var s=e.queue.length;while(++u<s)e.queue[u].callFulfilled(t)}return e};o.reject=function(e,t){e.state=n;e.outcome=t;var r=-1;var o=e.queue.length;while(++r<o)e.queue[r].callRejected(t);return e};function getThen(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function appyThen(){t.apply(e,arguments)}}function safelyResolveThenable(e,t){var r=false;function onError(t){if(!r){r=true;o.reject(e,t)}}function onSuccess(t){if(!r){r=true;o.resolve(e,t)}}function tryToUnwrap(){t(onSuccess,onError)}var n=tryCatch(tryToUnwrap);"error"===n.status&&onError(n.value)}function tryCatch(e,t){var r={};try{r.value=e(t);r.status="success"}catch(e){r.status="error";r.value=e}return r}Promise.resolve=resolve;function resolve(e){return e instanceof this?e:o.resolve(new this(INTERNAL),e)}Promise.reject=reject;function reject(e){var t=new this(INTERNAL);return o.reject(t,e)}Promise.all=all;function all(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length;var n=false;if(!r)return this.resolve([]);var i=new Array(r);var u=0;var s=-1;var l=new this(INTERNAL);while(++s<r)allResolver(e[s],s);return l;function allResolver(e,s){t.resolve(e).then(resolveFromAll,(function(e){if(!n){n=true;o.reject(l,e)}}));function resolveFromAll(e){i[s]=e;if(++u===r&&!n){n=true;o.resolve(l,i)}}}}Promise.race=race;function race(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length;var n=false;if(!r)return this.resolve([]);var i=-1;var u=new this(INTERNAL);while(++i<r)resolver(e[i]);return u;function resolver(e){t.resolve(e).then((function(e){if(!n){n=true;o.resolve(u,e)}}),(function(e){if(!n){n=true;o.reject(u,e)}}))}}var s=t;export default s;

