<div class="fixed inset-y-0 left-0 z-50 w-72 bg-neutral-900 transition-transform duration-300 ease-in-out lg:translate-x-0" 
     data-controller="sidebar" 
     data-sidebar-target="sidebar"
     data-sidebar-expanded-class="translate-x-0"
     data-sidebar-collapsed-class="-translate-x-full lg:w-18">
  
  <!-- Sidebar Header with Logo -->
  <div class="flex h-16 items-center justify-between px-4 border-b border-neutral-700">
    <div class="flex items-center">
      <%= image_tag("logomark.png", class: "w-8 h-8", alt: "Concerto") %>
      <span class="ml-3 text-white font-semibold text-lg" data-sidebar-target="logoText">Concerto</span>
    </div>
    <button type="button" 
            class="lg:hidden text-neutral-300 hover:text-white p-1 rounded-md"
            data-action="sidebar#toggle">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-3 py-4 space-y-6">
    
    <!-- Content Section -->
    <div>
      <h3 class="px-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2" data-sidebar-target="sectionTitle">
        Content
      </h3>
      <div class="space-y-1">
        <%= sidebar_nav_link_to "Dashboard", "/", "home" %>
        <%= sidebar_nav_link_to "Add Content", new_content_path, "plus" %>
        <%= sidebar_nav_link_to "Browse Content", contents_path, "collection" %>
        <%= sidebar_nav_link_to "Graphics", graphics_path, "photograph" %>
        <%= sidebar_nav_link_to "Rich Text", rich_texts_path, "document-text" %>
        <%= sidebar_nav_link_to "Videos", videos_path, "play" %>
      </div>
    </div>

    <!-- Network Section -->
    <div>
      <h3 class="px-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2" data-sidebar-target="sectionTitle">
        Network
      </h3>
      <div class="space-y-1">
        <%= sidebar_nav_link_to "Feeds", feeds_path, "rss" %>
        <%= sidebar_nav_link_to "RSS Feeds", rss_feeds_path, "globe-alt" %>
        <%= sidebar_nav_link_to "Screens", screens_path, "desktop-computer" %>
        <%= sidebar_nav_link_to "Templates", templates_path, "template" %>
      </div>
    </div>

    <!-- Administration Section -->
    <% if user_signed_in? %>
    <div>
      <h3 class="px-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2" data-sidebar-target="sectionTitle">
        Administration
      </h3>
      <div class="space-y-1">
        <%= sidebar_nav_link_to "Settings", admin_settings_path, "cog" %>
        <%= sidebar_nav_link_to "Users", "#", "users" %>
        <%= sidebar_nav_link_to "System", "#", "server" %>
      </div>
    </div>
    <% end %>

  </nav>

  <!-- Sidebar Footer with Collapse Toggle -->
  <div class="border-t border-neutral-700 p-3">
    <button type="button" 
            class="hidden lg:flex w-full items-center justify-center px-2 py-1 text-sm text-neutral-300 hover:text-white hover:bg-neutral-700 rounded-md transition-colors"
            data-action="sidebar#toggleCollapse"
            data-sidebar-target="collapseButton">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-sidebar-target="collapseIcon">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path>
      </svg>
      <span class="ml-2" data-sidebar-target="collapseText">Collapse</span>
    </button>
  </div>
</div>

<!-- Mobile overlay -->
<div class="fixed inset-0 bg-neutral-900/50 z-40 lg:hidden"
     data-sidebar-target="overlay"
     data-action="click->sidebar#close"
     style="display: none;"></div>